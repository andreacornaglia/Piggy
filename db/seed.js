const db = require('APP/db')

const seedTransactions = () => db.Promise.map([
  { category: 'Coffee',
    place: 'La Colombe',
    amount: 515,
    date: '2017-02-01' },
  { category: 'Lunch',
    place: 'Sweetgreens',
    amount: 648,
    date: '2017-02-01' },
  { category: 'Coffee',
    place: 'Starbucks',
    amount: 371,
    date: '2017-02-02' },
  { category: 'Lunch',
    place: 'Open Market',
    amount: 1071,
    date: '2017-02-02' },
  { category: 'Groceries',
    place: 'Traders Joe',
    amount: 5297,
    date: '2017-02-03' },
  { category: 'Coffee',
    place: 'La Colombe',
    amount: 568,
    date: '2017-02-04' },
  { category: 'Lunch',
    place: 'Sweetgreens',
    amount: 658,
    date: '2017-02-04' },
  { category: 'Groceries',
    place: 'Sunrise Market',
    amount: 8526,
    date: '2017-02-07' },
  { category: 'Coffee',
    place: 'Starbucks',
    amount: 485,
    date: '2017-02-07' },
  { category: 'Lunch',
    place: 'Open Market',
    amount: 906,
    date: '2017-02-07' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 603,
    date: '2017-02-08' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 747,
    date: '2017-02-08' },
  { category: 'Coffee',
    place: 'La Colombe',
    amount: 689,
    date: '2017-02-09' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 816,
    date: '2017-02-09' },
  { category: 'Groceries',
    place: 'Traders Joe',
    amount: 5314,
    date: '2017-02-10' },
  { category: 'Dinner',
    place: 'Ichiran Ramen',
    amount: 5159,
    date: '2017-02-11' },
  { category: 'Coffee',
    place: 'Starbucks',
    amount: 695,
    date: '2017-02-11' },
  { category: 'Lunch',
    place: 'Sweetgreens',
    amount: 1175,
    date: '2017-02-11' },
  { category: 'Coffee',
    place: 'Starbucks',
    amount: 565,
    date: '2017-02-12' },
  { category: 'Lunch',
    place: 'Sweetgreens',
    amount: 972,
    date: '2017-02-12' },
  { category: 'Groceries',
    place: 'Sunrise Market',
    amount: 8610,
    date: '2017-02-13' },
  { category: 'Dinner',
    place: 'Ichiran Ramen',
    amount: 3644,
    date: '2017-02-13' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 668,
    date: '2017-02-13' },
  { category: 'Lunch',
    place: 'Sweetgreens',
    amount: 1013,
    date: '2017-02-13' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 329,
    date: '2017-02-14' },
  { category: 'Lunch',
    place: 'Sweetgreens',
    amount: 833,
    date: '2017-02-14' },
  { category: 'Dinner',
    place: 'Caccio e Peppe',
    amount: 6424,
    date: '2017-02-16' },
  { category: 'Coffee',
    place: 'La Colombe',
    amount: 621,
    date: '2017-02-16' },
  { category: 'Lunch',
    place: 'Sweetgreens',
    amount: 648,
    date: '2017-02-16' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 201,
    date: '2017-02-17' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 998,
    date: '2017-02-17' },
  { category: 'Coffee',
    place: 'La Colombe',
    amount: 462,
    date: '2017-02-18' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 774,
    date: '2017-02-18' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 302,
    date: '2017-02-19' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 1007,
    date: '2017-02-19' },
  { category: 'Dinner',
    place: 'Caccio e Peppe',
    amount: 3011,
    date: '2017-02-21' },
  { category: 'Coffee',
    place: 'La Colombe',
    amount: 324,
    date: '2017-02-21' },
  { category: 'Lunch',
    place: 'Open Market',
    amount: 1023,
    date: '2017-02-21' },
  { category: 'Dinner',
    place: 'Pizza Antica',
    amount: 6945,
    date: '2017-02-22' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 331,
    date: '2017-02-22' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 1039,
    date: '2017-02-22' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 648,
    date: '2017-02-23' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 673,
    date: '2017-02-23' },
  { category: 'Coffee',
    place: 'Starbucks',
    amount: 292,
    date: '2017-02-25' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 1179,
    date: '2017-02-25' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 387,
    date: '2017-02-26' },
  { category: 'Lunch',
    place: 'Open Market',
    amount: 1184,
    date: '2017-02-26' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 201,
    date: '2017-02-27' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 642,
    date: '2017-02-27' },
  { category: 'Dinner',
    place: 'Caccio e Peppe',
    amount: 5401,
    date: '2017-02-28' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 269,
    date: '2017-02-28' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 714,
    date: '2017-02-28' },
  { category: 'Coffee',
    place: 'Starbucks',
    amount: 279,
    date: '2017-03-01' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 873,
    date: '2017-03-01' },
  { category: 'Dinner',
    place: 'Caccio e Peppe',
    amount: 4282,
    date: '2017-03-02' },
  { category: 'Coffee',
    place: 'Starbucks',
    amount: 251,
    date: '2017-03-02' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 1105,
    date: '2017-03-02' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 549,
    date: '2017-03-03' },
  { category: 'Lunch',
    place: 'Sweetgreens',
    amount: 659,
    date: '2017-03-03' },
  { category: 'Coffee',
    place: 'La Colombe',
    amount: 340,
    date: '2017-03-04' },
  { category: 'Lunch',
    place: 'Sweetgreens',
    amount: 1101,
    date: '2017-03-04' },
  { category: 'Coffee',
    place: 'La Colombe',
    amount: 633,
    date: '2017-03-05' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 642,
    date: '2017-03-05' },
  { category: 'Coffee',
    place: 'Starbucks',
    amount: 333,
    date: '2017-03-06' },
  { category: 'Lunch',
    place: 'Open Market',
    amount: 629,
    date: '2017-03-06' },
  { category: 'Coffee',
    place: 'Pushcart Coffee',
    amount: 405,
    date: '2017-03-07' },
  { category: 'Lunch',
    place: 'Open Market',
    amount: 1098,
    date: '2017-03-07' },
  { category: 'Dinner',
    place: 'Pizza Antica',
    amount: 6306,
    date: '2017-03-08' },
  { category: 'Coffee',
    place: 'Starbucks',
    amount: 503,
    date: '2017-03-08' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 976,
    date: '2017-03-08' },
  { category: 'Coffee',
    place: 'Starbucks',
    amount: 506,
    date: '2017-03-09' },
  { category: 'Lunch',
    place: 'Leos Bagels',
    amount: 983,
    date: '2017-03-09' }
], transaction => db.model('transactions').create(transaction))

const seedUsers = () => db.Promise.map([
  {name: 'so many', email: 'god@example.com', password: '1234'},
  {name: 'Barack Obama', email: 'barack@example.gov', password: '1234'},
], user => db.model('users').create(user))

db.didSync
  .then(() => db.sync({force: true}))
  .then(seedUsers)
  .then(users => console.log(`Seeded ${users.length} users OK`))
  .then(seedTransactions)
  .then(transactions => console.log(`Seeded ${transactions.length} transactions OK`))
  .catch(error => console.error(error))    
  .finally(() => db.close())
